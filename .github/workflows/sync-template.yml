name: Sync Template

on: workflow_dispatch

jobs:
  sync-template:
    runs-on: ubuntu-20.04
    steps:
    - name: Checkout Template Repository
      uses: actions/checkout@v2
      with:
        repository: stactools-packages/template
        path: template
    
    - name: Checkout Package Repository
      uses: actions/checkout@v2
      with:
        path: package
        
    - name: List PWD Contents
      run: |
        pwd 
        ls -la *
    
    - name: Update Select Template Changes
      run: |
        cp -r ./template/scripts/ ./package/scripts/
        cp -r ./template/docker/ ./package/docker/
        cp ./template/.flake8 ./package/.flake8
        cp ./template/.github/workflows/*yml ./package/.github/workflows/*yml

    - name: Create Pull Request
      uses: peter-evans/create-pull-request@v3
      with:
        path: package
